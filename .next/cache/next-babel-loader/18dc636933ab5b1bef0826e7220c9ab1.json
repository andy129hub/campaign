{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport Layout from '../../components/Layout';\nimport { Card, Button, Grid } from 'semantic-ui-react';\nimport ContributeForm from '../../components/ContributeForm';\nimport { Link } from '../../routes';\nimport web3 from '../../ethereum/web3';\nimport Campaign from '../../ethereum/campaign';\n\nclass CampaignShow extends React.Component {\n  static async getInitialProps(props) {\n    // console.log(\"address :  \",props.query.address);\n    // 创建合约实例\n    const campaign = Campaign(props.query.address);\n    const summary = await campaign.methods.getSummay().call();\n    /*\n      // 获取合约的基本信息\n      function getSummay() public view returns(uint,uint,uint,uint,string,address){\n        return (minimumContribute,address(this).balance,requests.length,approversCount,description,manager);\n      }\n    */\n\n    return {\n      address: props.query.address,\n      minimumContribute: summary[0],\n      balance: summary[1],\n      requestCount: summary[2],\n      approvalCount: summary[3],\n      description: summary[4],\n      manager: summary[5]\n    };\n  }\n\n  renderCards() {\n    const {\n      address,\n      minimumContribute,\n      balance,\n      requestCount,\n      approvalCount,\n      description,\n      manager\n    } = this.props;\n    console.log(\"address : \", address);\n    console.log(\"balance : \", balance);\n    console.log(\"description : \", description);\n    const items = [{\n      header: description,\n      meta: '众筹项目名称',\n      description: '当前管理者创建的众筹项目名称',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: address,\n      meta: '众筹项目地址',\n      description: '每个众筹项目地址唯一',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: manager,\n      meta: '管理者的地址',\n      description: '当前管理者的地址',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: minimumContribute,\n      meta: '最小贡献量',\n      description: '用户最小贡献金额(wei)',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: web3.utils.fromWei(balance, 'ether'),\n      meta: '当前众筹金额(ether)',\n      description: '已众筹总金额',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: requestCount,\n      meta: '投资请求的数量',\n      description: '管理者使用众筹的钱发起的 投资请求',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: approvalCount,\n      meta: '投资人的数量',\n      description: '有多少人参与了此项众筹',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }];\n    return __jsx(Card.Group, {\n      items: items\n    });\n  }\n\n  render() {\n    return __jsx(Layout, null, __jsx(\"h1\", null, this.props.description), __jsx(Grid, null, __jsx(Grid.Row, null, __jsx(Grid.Column, {\n      width: 10\n    }, this.renderCards()), __jsx(Grid.Column, {\n      width: 6\n    }, __jsx(ContributeForm, {\n      address: this.props.address,\n      minimum: this.props.minimumContribute\n    }))), __jsx(Grid.Row, null, __jsx(Grid.Column, {\n      width: 6\n    }, __jsx(Link, {\n      route: `/campaigns/${this.props.address}/requests`\n    }, __jsx(Button, {\n      primary: true\n    }, \"\\u67E5\\u770B\\u8BF7\\u6C42\"))))));\n  }\n\n}\n\nexport default CampaignShow;","map":{"version":3,"sources":["/Users/andy/Downloads/exam3/campaign_contract/pages/campaigns/show.js"],"names":["React","Layout","Card","Button","Grid","ContributeForm","Link","web3","Campaign","CampaignShow","Component","getInitialProps","props","campaign","query","address","summary","methods","getSummay","call","minimumContribute","balance","requestCount","approvalCount","description","manager","renderCards","console","log","items","header","meta","style","overflowWrap","utils","fromWei","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Layout from '../../components/Layout';\nimport {Card,Button,Grid} from 'semantic-ui-react';\nimport ContributeForm from '../../components/ContributeForm';\n\nimport {Link} from '../../routes';\n\nimport web3 from '../../ethereum/web3';\nimport Campaign from '../../ethereum/campaign';\n\nclass CampaignShow extends React.Component {\n\n  static async getInitialProps(props) {\n    // console.log(\"address :  \",props.query.address);\n\n    // 创建合约实例\n    const campaign = Campaign(props.query.address);\n\n    const summary = await campaign.methods.getSummay().call();\n    /*\n      // 获取合约的基本信息\n      function getSummay() public view returns(uint,uint,uint,uint,string,address){\n        return (minimumContribute,address(this).balance,requests.length,approversCount,description,manager);\n      }\n    */\n\n    return {\n        address:props.query.address,\n        minimumContribute:summary[0],\n        balance:summary[1],\n        requestCount:summary[2],\n        approvalCount:summary[3],\n        description:summary[4],\n        manager:summary[5]\n    };\n  }\n\n  renderCards(){\n    const {\n      address,\n      minimumContribute,\n      balance,\n      requestCount,\n      approvalCount,\n      description,\n      manager\n    }=this.props;\n\n    console.log(\"address : \", address);\n    console.log(\"balance : \", balance);\n    console.log(\"description : \", description);\n\n    const items = [\n      {\n        header:description,\n        meta:'众筹项目名称',\n        description:'当前管理者创建的众筹项目名称',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:address,\n        meta:'众筹项目地址',\n        description:'每个众筹项目地址唯一',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:manager,\n        meta:'管理者的地址',\n        description:'当前管理者的地址',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:minimumContribute,\n        meta:'最小贡献量',\n        description:'用户最小贡献金额(wei)',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:web3.utils.fromWei(balance,'ether'),\n        meta:'当前众筹金额(ether)',\n        description:'已众筹总金额',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:requestCount,\n        meta:'投资请求的数量',\n        description:'管理者使用众筹的钱发起的 投资请求',\n        style:{overflowWrap:'break-word'}\n      },\n      {\n        header:approvalCount,\n        meta:'投资人的数量',\n        description:'有多少人参与了此项众筹',\n        style:{overflowWrap:'break-word'}\n      }\n    ]\n\n    return <Card.Group items={items} />;\n\n  }\n\n  render() {\n    return (\n        <Layout>\n        <h1>{this.props.description}</h1>\n          <Grid>\n\n            <Grid.Row>\n\n              <Grid.Column width={10}>\n                {this.renderCards()}\n              </Grid.Column>\n\n              <Grid.Column width={6}>\n                <ContributeForm address={this.props.address} minimum={this.props.minimumContribute}/>\n              </Grid.Column>\n\n            </Grid.Row>\n\n            <Grid.Row>\n              <Grid.Column width={6}>\n                <Link route={`/campaigns/${this.props.address}/requests`}>\n                  <Button primary>查看请求</Button>\n                </Link>\n              </Grid.Column>\n            </Grid.Row>\n\n          </Grid>\n        </Layout>\n    );\n  }\n}\n\nexport default CampaignShow;\n"]},"metadata":{},"sourceType":"module"}