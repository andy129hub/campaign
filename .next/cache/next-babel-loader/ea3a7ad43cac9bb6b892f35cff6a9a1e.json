{"ast":null,"code":"// 导入在本地下载好的 web3 包\nimport Web3 from 'web3';\n/*  在 next 框架中， window is not defined 的问题\n    出错代码： const web3 = new Web3(window.web3.currentProvider);\n\n  首先为什么会报出以上问题？\n  next 框架解析.js 的原理如下：\n    our code --> next server --> HTML doc --later...--> our code\n\n  报错就出现在 next server 这里， next 框架不包含 window 对象，window 对象是 浏览器中内置的对象\n    -- 在终端中输入 node 命令\n    -- 再输入 typeof window    ---> 结果输出：'undefined'\n\n    -- 在谷歌浏览器中，打开开发者工具， 终端上输入:  typeof window   ---> 结果输出：object   (说明是内置对象)\n\n\n  解决办法：\n\n  var web3;\n\n  if(typeof window !='undefined' && window.web3 != 'undefined') {\n    web3 = new Web3(window.web3.currentProvider);\n  }else {\n    const provider = new Web3.providers.HttpProvider(\n      'https://ropsten.infura.io/v3/4d2fe19ec56d48dcb2fea4cf8b193416'\n    );\n\n    web3 = new Web3(provider);\n  }\n*/\n// 当前浏览器 web3 中的provider (metamask 内置web3，与 本地下载的 web3 版本不同)\n\nvar web3;\n\nif (true && window.web3 != 'undefined') {\n  web3 = new Web3(window.web3.currentProvider);\n} else {\n  var provider = new Web3.providers.HttpProvider('https://ropsten.infura.io/v3/4d2fe19ec56d48dcb2fea4cf8b193416');\n  web3 = new Web3(provider);\n} // 导出 web3 实例，让其他文件获取 web3\n\n\nexport default web3;","map":{"version":3,"sources":["/Users/andy/Downloads/exam3/campaign_contract/ethereum/web3.js"],"names":["Web3","web3","window","currentProvider","provider","providers","HttpProvider"],"mappings":"AAAA;AACA,OAAOA,IAAP,MAAiB,MAAjB;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;AACA,IAAIC,IAAJ;;AAEA,IAAG,QAA+BC,MAAM,CAACD,IAAP,IAAe,WAAjD,EAA8D;AAC5DA,EAAAA,IAAI,GAAG,IAAID,IAAJ,CAASE,MAAM,CAACD,IAAP,CAAYE,eAArB,CAAP;AACD,CAFD,MAEM;AACJ,MAAMC,QAAQ,GAAG,IAAIJ,IAAI,CAACK,SAAL,CAAeC,YAAnB,CACf,+DADe,CAAjB;AAIAL,EAAAA,IAAI,GAAG,IAAID,IAAJ,CAASI,QAAT,CAAP;AACD,C,CAED;;;AACA,eAAeH,IAAf","sourcesContent":["// 导入在本地下载好的 web3 包\nimport Web3 from 'web3';\n\n/*  在 next 框架中， window is not defined 的问题\n    出错代码： const web3 = new Web3(window.web3.currentProvider);\n\n  首先为什么会报出以上问题？\n  next 框架解析.js 的原理如下：\n    our code --> next server --> HTML doc --later...--> our code\n\n  报错就出现在 next server 这里， next 框架不包含 window 对象，window 对象是 浏览器中内置的对象\n    -- 在终端中输入 node 命令\n    -- 再输入 typeof window    ---> 结果输出：'undefined'\n\n    -- 在谷歌浏览器中，打开开发者工具， 终端上输入:  typeof window   ---> 结果输出：object   (说明是内置对象)\n\n\n  解决办法：\n\n  var web3;\n\n  if(typeof window !='undefined' && window.web3 != 'undefined') {\n    web3 = new Web3(window.web3.currentProvider);\n  }else {\n    const provider = new Web3.providers.HttpProvider(\n      'https://ropsten.infura.io/v3/4d2fe19ec56d48dcb2fea4cf8b193416'\n    );\n\n    web3 = new Web3(provider);\n  }\n*/\n// 当前浏览器 web3 中的provider (metamask 内置web3，与 本地下载的 web3 版本不同)\nvar web3;\n\nif(typeof window !='undefined' && window.web3 != 'undefined') {\n  web3 = new Web3(window.web3.currentProvider);\n}else {\n  const provider = new Web3.providers.HttpProvider(\n    'https://ropsten.infura.io/v3/4d2fe19ec56d48dcb2fea4cf8b193416'\n  );\n\n  web3 = new Web3(provider);\n}\n\n// 导出 web3 实例，让其他文件获取 web3\nexport default web3;\n"]},"metadata":{},"sourceType":"module"}